<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pianobar</title>
    <link rel=StyleSheet href="inc/styles.css" type="text/css" />
    <link rel="icon" type="image/png" href="favicon.ico" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://cdn.craig.is/js/mousetrap/mousetrap.min.js?88c23"></script>
    <script src="inc/jquery-scroller-v1.min.js"></script>
    <script>
        $.fn.pingpongscroll = function () {
            var delay = 30;
            $(this).wrapInner('<span>');
            var contentWidth = $(this).children('span').width();
            var boxWidth = $(this).width();
            if (contentWidth > boxWidth) {
                var startIndent = parseInt($(this).css('text-indent'));
                var currIndent  = startIndent;
                var left = true;
                $(this).pingpongscrollstep(contentWidth, startIndent, currIndent, left, delay);
            }
        };
        
        $.fn.pingpongscrollstep = function (contentWidth, startIndent, currIndent, left, delay) {
            if($(this).length != 0) {
                thisdelay = delay;
                if(left) {
                    if(contentWidth + currIndent > $(this).width()) {
                        currIndent = currIndent - 1;
                        $(this).css('text-indent', currIndent);
                    } else {
                        left = false;
                        thisdelay = thisdelay*4;
                    }
                } else {
                    if(currIndent < startIndent) {
                        currIndent = currIndent + 1;
                        $(this).css('text-indent', currIndent);
                    } else {
                        left = true;
                        thisdelay = thisdelay*4;
                    }
                }
                var thiselement = this;
                setTimeout(function(){
                    $(thiselement).pingpongscrollstep(contentWidth, startIndent, currIndent, left, delay);
                }, thisdelay);
            }
        };
        
        $(document).ready(function(){
            $('#titlechange').change(function(){
                
                var title  = document.createElement('h1');
                var artist = document.createElement('h2');
                var album  = document.createElement('h2');
                
                $(title).text($(this).val());
                $(artist).text($(this).val());
                $(album).text($(this).val()).addClass('album').text($(this).val());

                $("#marquee-wrap").html("").append(title,artist,album);
                $box = $('#marquee-wrap');
                $box.children().each(function(){
                    $(this).pingpongscroll();
                });
                
            });
        });
    </script>
</head>
<body>

    <input type="text" id="titlechange"/><br/>
    <div id="content">
        <img src="inc/love.png"    class="love"   style="display:none" />
        <img src="inc/pandora.png" class="albumart" alt="Pandora logo" />
        <div id="marquee-wrap" >
            <h1>Loading...</h1>
            <h2>Getting Status from Server...</h2>
            <h2 class="album"></h2>
        </div>
        <div class="time" style="display: none;">
            <div class="progress_bar"><div class="marker"></div></div>
            <span class="remaining"></span>/<span class="duration"></span>
        </div>
        <p   class="details">EMPTY</p>
    </div>

</body>
</html>
